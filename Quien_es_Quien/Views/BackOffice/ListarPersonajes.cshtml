@{
    ViewBag.Title = "MostrarLista";
}

<style>
    table, th, td {
        border: 1px solid black;
    }

    h1 {
        font-family: Arial, sans-serif;
        font-weight: 900;
        -webkit-text-stroke: 2px #003326;
        text-shadow: 3px 5px rosybrown;
    }

    #AgregarCat {
        width: 300px;
        margin-left: 15%;
    }


    th {
        background-color: lavender;
        font-size: 18px;
    }

    td {
        background-color: gainsboro;
        font-size: 16px;
    }

    #categorias {
        margin-top: -10px;
        margin-bottom: 10px;
    }

    body {
        padding-bottom: 10px;
        background-color: lightsteelblue;
    }
</style>

<div class="jumbotron text-center" style="background-color:indigo">
    <h1 style="color:white;font-size:400%">Listado de personajes</h1>
</div>

<a id="AgregarCat" class="btn btn-info" href="/BackOffice/AgregarPersonaje">Agregar Personaje</a>
<a id="AgregarCat" class="btn btn-info" href="/BackOffice/AgregarCategoriaPersonaje">Agregar Categoria de Personaje</a>

<h3>@Session["Mensaje"]</h3>

@{ try
    {
        if ((int)Session["Error"] == 404)
        {
            <script>alert("El personaje no pudo ingresarse ya que no se metio ninguna foto")</script>
        }
    }
    catch (NullReferenceException)
    {
        //Nada que ver aqui
    }

}

<form action="@Url.Action("ListarPersonajes", "BackOffice")" method="post" id="categorias">
    Ordenar por:
    <select name="Categoria">
        @foreach (string sCat in BD.dicCategorias.Values)
        {
            <option value="@sCat"> @sCat </option>
        }
    </select>
    <input type="submit" name="Submit" value="Enviar" class="btn btn-success" />
</form>

<table class="table table-bordered">
    <tr>
        <th><b>Nombre</b></th>
        <th><b>Foto</b></th>
        <th><b>Categoria</b></th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
    @foreach (Personaje unPers in ViewBag.ListaPersonajes)
    {
        string nombreFile = unPers.IDPersonaje + ".jpg";
        <tr>
            <td>@unPers.Nombre</td>
            <td><img src="~/Content/Fotos/@nombreFile" alt="SuperPic que no cargo" width="300"></td>
            <td>@unPers.Categoria</td>
            <td>@Html.ActionLink("Modificar personaje", "ModificarPersonaje", "BackOffice", new { id = unPers.IDPersonaje }, new { @class = "btn btn-info" })</td> <!--Mandas como parametro el ID del personaje a modificar-->
            <td>@Html.ActionLink("Borrar Personaje", "BorrarPersonaje", "BackOffice", new { id = unPers.IDPersonaje }, new { @class = "btn btn-info" })</td>
            <td>@Html.ActionLink("Cambiar caracterisitcas del personaje", "CaracteristicasPersonaje", "BackOffice", new { id = unPers.IDPersonaje }, new { @class = "btn btn-info" })</td>
        </tr>
    }
</table>